{% load wagtailcore_tags navigation_tags wagtailimages_tags %}

<div class="blog-listing-card">
    <a class="blog-listing-card__link" href="{% pageurl blog %}">
        {% with blog.main_image as main_image %}
            {% if main_image %}
            <figure class="blog-listing-card__image">
                {% image main_image fill-322x247-c100 loading="lazy" %}
            </figure>
            {% endif %}
        {% endwith %}
        <div class="blog-listing-card__contents">
            <h2 class="blog-listing-card__title">{{ blog.title }}</h2>
            {% if blog.intro %}
                <p class="blog-listing-card__introduction">{{ blog.intro|truncatewords:15 }}</p>
            {% endif %}
            <p class="blog-listing-card__metadata">
                {% if blog.date %}
                    {{ blog.date }} by
                {% endif %}
                {% with authors=blog.authors.all %}
                    {% if authors %}
                       {% for author in authors %}
                          {{ author.name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </p>
        </div>
    </a>
</div>



